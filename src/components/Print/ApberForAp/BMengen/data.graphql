query apById($apId: UUID!, $jahr: Int!, $startJahr: Int!) {
  apById(id: $apId) {
    id
    oneLPop: popsByApId(
      filter: {
        and: [{ status: { notEqualTo: 300 } }, { status: { isNull: false } }]
      }
    ) {
      nodes {
        id
        tpopsByPopId(filter: { apberRelevant: { equalTo: 1 } }) {
          totalCount
        }
        popbersByPopId(filter: {jahr: {equalTo: $jahr}}) {
          totalCount
        }
      }
    }
    oneLTpop: popsByApId(
      filter: {
        and: [{ status: { notEqualTo: 300 } }, { status: { isNull: false } }]
      }
    ) {
      nodes {
        id
        tpopsByPopId(filter: {
          and: [{ status: { notEqualTo: 300 } }, { status: { isNull: false } }, { apberRelevant: { equalTo: 1 } }]
        }) {
          totalCount
          nodes {
            id
            tpopbersByTpopId(filter: {jahr: {equalTo: $jahr}}) {
              totalCount
            }
          }
        }
      }
    }
    oneRPop: popsByApId(
      filter: {
        and: [{ status: { notEqualTo: 300 } }, { status: { isNull: false } }]
      }
    ) {
      nodes {
        id
        tpopsByPopId(filter: { apberRelevant: { equalTo: 1 } }) {
          totalCount
        }
        popbersByPopId(filter: {
            and: [
              { jahr: { greaterThanOrEqualTo: $startJahr } },
              { jahr: { lessThanOrEqualTo: $jahr } },
              { entwicklung: { in: [1, 2, 3, 4, 8]} }
            ]
          }
        ) {
          totalCount
        }
      }
    }
  }
}
